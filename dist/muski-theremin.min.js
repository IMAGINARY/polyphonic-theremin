!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){o(e,t,n[t])}))}return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function u(e){if(Array.isArray(e))return s(e)}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function p(e){return u(e)||c(e)||h(e)||l()}(function(){"use strict";var e=function(e,t){t=t||Object.create(null);var n=document.createEvent("Event");n.initEvent(e,t.bubbles||!1,t.cancelable||!1);for(var i,r=2;r<h.length;r++)n[i=h[r]]=t[i]||p[r];n.buttons=t.buttons||0;var o=0;return o=void 0!==t.pressure&&n.buttons?t.pressure:n.buttons?.5:0,n.x=n.clientX,n.y=n.clientY,n.pointerId=t.pointerId||0,n.width=t.width||1,n.height=t.height||1,n.pressure=o,n.tiltX=t.tiltX||0,n.tiltY=t.tiltY||0,n.twist=t.twist||0,n.tangentialPressure=t.tangentialPressure||0,n.pointerType=t.pointerType||"",n.hwTimestamp=t.hwTimestamp||0,n.isPrimary=t.isPrimary||!1,n.detail=0,n},t=function(){this.array=[],this.size=0},n=function(e,t,n,i){this.addCallback=e.bind(i),this.removeCallback=t.bind(i),this.changedCallback=n.bind(i),O&&(this.observer=new O(this.mutationWatcher.bind(this)))},i=function(e){return"body /shadow-deep/ "+e},r=function(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+"; }"},o=function(){if(N){C.forEach((function(e){I+=e.selector+r(e.value)+"\n",_&&(I+=i(e.selector)+r(e.value)+"\n")}));var e=document.createElement("style");e.textContent=I,document.head.appendChild(e)}},a=function(){if(!window.PointerEvent){if(window.PointerEvent=e,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),y.registerSource("ms",ee)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),y.registerSource("mouse",x),void 0!==window.ontouchstart&&y.registerSource("touch",V);y.register(document)}},s=function(e){if(!y.pointermap.has(e)){var t=new Error("NotFoundError");throw t.name="NotFoundError",t}},u=function(e){for(var t=e.parentNode;t&&t!==e.ownerDocument;)t=t.parentNode;if(!t){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}},c=function(e){return 0!==y.pointermap.get(e).buttons},l=function(){window.Element&&!window.Element.prototype.setPointerCapture&&Object.defineProperties(window.Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:$},hasPointerCapture:{value:J}})},h=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],p=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],d=window.Map&&window.Map.prototype.forEach?Map:t;t.prototype={set:function(e,t){if(void 0===t)return this.delete(e);this.has(e)||this.size++,this.array[e]=t},has:function(e){return void 0!==this.array[e]},delete:function(e){this.has(e)&&(delete this.array[e],this.size--)},get:function(e){return this.array[e]},clear:function(){this.array.length=0,this.size=0},forEach:function(e,t){return this.array.forEach((function(n,i){e.call(t,n,i,this)}),this)}};var f=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],v=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],m={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},b="undefined"!=typeof SVGElementInstance,y={pointermap:new d,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(e,t){var n=t,i=n.events;i&&(i.forEach((function(e){n[e]&&(this.eventMap[e]=n[e].bind(n))}),this),this.eventSources[e]=n,this.eventSourceList.push(n))},register:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.register.call(t,e)},unregister:function(e){for(var t,n=this.eventSourceList.length,i=0;i<n&&(t=this.eventSourceList[i]);i++)t.unregister.call(t,e)},contains:function(e,t){try{return e.contains(t)}catch(e){return!1}},down:function(e){e.bubbles=!0,this.fireEvent("pointerdown",e)},move:function(e){e.bubbles=!0,this.fireEvent("pointermove",e)},up:function(e){e.bubbles=!0,this.fireEvent("pointerup",e)},enter:function(e){e.bubbles=!1,this.fireEvent("pointerenter",e)},leave:function(e){e.bubbles=!1,this.fireEvent("pointerleave",e)},over:function(e){e.bubbles=!0,this.fireEvent("pointerover",e)},out:function(e){e.bubbles=!0,this.fireEvent("pointerout",e)},cancel:function(e){e.bubbles=!0,this.fireEvent("pointercancel",e)},leaveOut:function(e){this.out(e),this.propagate(e,this.leave,!1)},enterOver:function(e){this.over(e),this.propagate(e,this.enter,!0)},eventHandler:function(e){if(!e._handledByPE){var t=e.type,n=this.eventMap&&this.eventMap[t];n&&n(e),e._handledByPE=!0}},listen:function(e,t){t.forEach((function(t){this.addEvent(e,t)}),this)},unlisten:function(e,t){t.forEach((function(t){this.removeEvent(e,t)}),this)},addEvent:function(e,t){e.addEventListener(t,this.boundHandler)},removeEvent:function(e,t){e.removeEventListener(t,this.boundHandler)},makeEvent:function(t,n){this.captureInfo[n.pointerId]&&(n.relatedTarget=null);var i=new e(t,n);return n.preventDefault&&(i.preventDefault=n.preventDefault),i._target=i._target||n.target,i},fireEvent:function(e,t){var n=this.makeEvent(e,t);return this.dispatchEvent(n)},cloneEvent:function(e){for(var t,n=Object.create(null),i=0;i<f.length;i++)n[t=f[i]]=e[t]||v[i],!b||"target"!==t&&"relatedTarget"!==t||n[t]instanceof SVGElementInstance&&(n[t]=n[t].correspondingUseElement);return e.preventDefault&&(n.preventDefault=function(){e.preventDefault()}),n},getTarget:function(e){var t=this.captureInfo[e.pointerId];return t?e._target!==t&&e.type in m?void 0:t:e._target},propagate:function(e,t,n){for(var i=e.target,r=[];null!=i&&i!==document&&!i.contains(e.relatedTarget);)if(r.push(i),!(i=i.parentNode))return;n&&r.reverse(),r.forEach((function(n){e.target=n,t.call(this,e)}),this)},setCapture:function(t,n,i){this.captureInfo[t]&&this.releaseCapture(t,i),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t,i),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var r=new e("gotpointercapture",{bubbles:!0});r.pointerId=t,r._target=n,i||this.asyncDispatchEvent(r)},releaseCapture:function(t,n){var i=this.captureInfo[t];if(i){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var r=new e("lostpointercapture",{bubbles:!0});r.pointerId=t,r._target=i,n||this.asyncDispatchEvent(r)}},dispatchEvent:function(e){var t=this.getTarget(e);if(t)return t.dispatchEvent(e)},asyncDispatchEvent:function(e){requestAnimationFrame(this.dispatchEvent.bind(this,e))}};y.boundHandler=y.eventHandler.bind(y);var g={shadow:function(e){if(e)return e.shadowRoot||e.webkitShadowRoot},canTarget:function(e){return e&&Boolean(e.elementFromPoint)},targetingShadow:function(e){var t=this.shadow(e);if(this.canTarget(t))return t},olderShadow:function(e){var t=e.olderShadowRoot;if(!t){var n=e.querySelector("shadow");n&&(t=n.olderShadowRoot)}return t},allShadows:function(e){for(var t=[],n=this.shadow(e);n;)t.push(n),n=this.olderShadow(n);return t},searchRoot:function(e,t,n){if(e){var i,r,o=e.elementFromPoint(t,n);for(r=this.targetingShadow(o);r;){if(i=r.elementFromPoint(t,n)){var a=this.targetingShadow(i);return this.searchRoot(a,t,n)||i}r=this.olderShadow(r)}return o}},owner:function(e){for(var t=e;t.parentNode;)t=t.parentNode;return t.nodeType!==Node.DOCUMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(t=document),t},findTarget:function(e){var t=e.clientX,n=e.clientY,i=this.owner(e.target);return i.elementFromPoint(t,n)||(i=document),this.searchRoot(i,t,n)}},E=Array.prototype.forEach.call.bind(Array.prototype.forEach),T=Array.prototype.map.call.bind(Array.prototype.map),w=Array.prototype.slice.call.bind(Array.prototype.slice),P=Array.prototype.filter.call.bind(Array.prototype.filter),O=window.MutationObserver||window.WebKitMutationObserver,S="[touch-action]",M={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(e){this.observer&&g.canTarget(e)&&this.observer.observe(e,M)},enableOnSubtree:function(e){this.watchSubtree(e),e===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(e)},installNewSubtree:function(e){E(this.findElements(e),this.addElement,this)},findElements:function(e){return e.querySelectorAll?e.querySelectorAll(S):[]},removeElement:function(e){this.removeCallback(e)},addElement:function(e){this.addCallback(e)},elementChanged:function(e,t){this.changedCallback(e,t)},concatLists:function(e,t){return e.concat(w(t))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(e){return e.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(e){var t=T(e,this.findElements,this);return t.push(P(e,this.isElement)),t.reduce(this.concatLists,[])},mutationWatcher:function(e){e.forEach(this.mutationHandler,this)},mutationHandler:function(e){"childList"===e.type?(this.flattenMutationTree(e.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(e.removedNodes).forEach(this.removeElement,this)):"attributes"===e.type&&this.elementChanged(e.target,e.oldValue)}};var C=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],I="",N=window.PointerEvent||window.MSPointerEvent,_=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,A=y.pointermap,k=25,R=[1,4,2,8,16],j=!1;try{j=1===new MouseEvent("test",{buttons:1}).buttons}catch(e){}var D,x={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(e){y.listen(e,this.events)},unregister:function(e){y.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,n=this.lastTouches,i=e.clientX,r=e.clientY,o=0,a=n.length;o<a&&(t=n[o]);o++){var s=Math.abs(i-t.x),u=Math.abs(r-t.y);if(s<=k&&u<=k)return!0}},prepareEvent:function(e){var t=y.cloneEvent(e),n=t.preventDefault;return t.preventDefault=function(){e.preventDefault(),n()},t.pointerId=this.POINTER_ID,t.isPrimary=!0,t.pointerType=this.POINTER_TYPE,"webkitForce"in e&&(t.pressure=e.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),t},prepareButtonsForMove:function(e,t){var n=A.get(this.POINTER_ID);0!==t.which&&n?e.buttons=n.buttons:e.buttons=0,t.buttons=e.buttons},mousedown:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=A.get(this.POINTER_ID),n=this.prepareEvent(e);j||(n.buttons=R[n.button],t&&(n.buttons|=t.buttons),e.buttons=n.buttons),A.set(this.POINTER_ID,e),t&&0!==t.buttons?y.move(n):y.down(n)}},webkitmouseforcechanged:function(e){this.mousemove(e)},mousemove:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);j||this.prepareButtonsForMove(t,e),t.button=-1,A.set(this.POINTER_ID,e),y.move(t)}},mouseup:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=A.get(this.POINTER_ID),n=this.prepareEvent(e);if(!j){var i=R[n.button];n.buttons=t?t.buttons&~i:0,e.buttons=n.buttons}A.set(this.POINTER_ID,e),n.buttons&=~R[n.button],0===n.buttons?y.up(n):y.move(n)}},mouseover:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);j||this.prepareButtonsForMove(t,e),t.button=-1,A.set(this.POINTER_ID,e),y.enterOver(t)}},mouseout:function(e){if(!this.isEventSimulatedFromTouch(e)){var t=this.prepareEvent(e);j||this.prepareButtonsForMove(t,e),t.button=-1,y.leaveOut(t)}},cancel:function(e){var t=this.prepareEvent(e);y.cancel(t),this.deactivateMouse()},deactivateMouse:function(){A.delete(this.POINTER_ID)}},Y=y.captureInfo,F=g.findTarget.bind(g),L=g.allShadows.bind(g),X=y.pointermap,G=2500,q="touch-action",z=1,K=2,H=4,B=8,U=z|K|H|B,V={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(e){D.enableOnSubtree(e)},unregister:function(){},elementAdded:function(e){var t=e.getAttribute(q),n=this.touchActionToScrollType(t);"number"==typeof n&&(e._scrollType=n,y.listen(e,this.events),L(e).forEach((function(e){e._scrollType=n,y.listen(e,this.events)}),this))},elementRemoved:function(e){if(X.size>0){var t=this.events;e.addEventListener("touchend",(function(){e._scrollType=void 0,y.unlisten(e,t)}))}else e._scrollType=void 0,y.unlisten(e,this.events);L(e).forEach((function(e){e._scrollType=void 0,y.unlisten(e,this.events)}),this)},elementChanged:function(e,t){var n=e.getAttribute(q),i=this.touchActionToScrollType(n),r=this.touchActionToScrollType(t);"number"==typeof i&&"number"==typeof r?(e._scrollType=i,L(e).forEach((function(e){e._scrollType=i}),this)):"number"==typeof r?this.elementRemoved(e):"number"==typeof i&&this.elementAdded(e)},scrollTypes:{UP:function(e){return e.includes("pan-y")||e.includes("pan-up")?z:0},DOWN:function(e){return e.includes("pan-y")||e.includes("pan-down")?K:0},LEFT:function(e){return e.includes("pan-x")||e.includes("pan-left")?H:0},RIGHT:function(e){return e.includes("pan-x")||e.includes("pan-right")?B:0}},touchActionToScrollType:function(e){if(e){if("auto"===e)return U;if("none"===e)return 0;var t=e.split(" "),n=this.scrollTypes;return n.UP(t)|n.DOWN(t)|n.LEFT(t)|n.RIGHT(t)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===X.size||1===X.size&&X.has(1))&&(this.firstTouch=e.identifier,this.firstXY={X:e.clientX,Y:e.clientY},this.scrolling=!1)},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(e){var t=0;return"touchstart"!==e&&"touchmove"!==e&&"touchforcechange"!==e||(t=1),t},touchToPointer:function(e){var t=this.currentTouchEvent,n=y.cloneEvent(e),i=n.pointerId=e.identifier+2;if(n.target=Y[i]||F(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(t.type),n.width=2*(e.radiusX||e.webkitRadiusX||0),n.height=2*(e.radiusY||e.webkitRadiusY||0),n.pressure=void 0!==e.force?e.force:void 0!==e.webkitForce?e.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(e),e.altitudeAngle){var r=Math.tan(e.altitudeAngle),o=180/Math.PI;n.tiltX=Math.atan(Math.cos(e.azimuthAngle)/r)*o,n.tiltY=Math.atan(Math.sin(e.azimuthAngle)/r)*o}else n.tiltX=0,n.tiltY=0;"stylus"===e.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey;var a=this;return n.preventDefault=function(){a.scrolling=!1,a.firstXY=null,t.preventDefault()},n},processTouches:function(e,t){var n=e.changedTouches;this.currentTouchEvent=e;for(var i,r=0;r<n.length;r++)i=n[r],t.call(this,this.touchToPointer(i))},shouldScroll:function(e){if(this.firstXY){var t,n=e.currentTarget._scrollType;if(0===n)t=!1;else if(n===U)t=!0;else{var i=e.changedTouches[0],r=i.clientY-this.firstXY.Y,o=Math.abs(r),a=i.clientX-this.firstXY.X,s=Math.abs(a),u=n&z,c=n&K,l=n&H,h=n&B;l&&h?t=s>o:l?t=s>o&&a>0:h&&(t=s>o&&a<0),t||(u&&c?t=s<o:u?t=s<o&&r>0:c&&(t=s<o&&r<0))}return this.firstXY=null,t}},findTouch:function(e,t){for(var n,i=0,r=e.length;i<r&&(n=e[i]);i++)if(n.identifier===t)return!0},vacuumTouches:function(e){var t=e.touches;if(X.size>=t.length){var n=[];X.forEach((function(e,i){if(1!==i&&!this.findTouch(t,i-2)){var r=e.out;n.push(r)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(e){this.vacuumTouches(e),this.setPrimaryTouch(e.changedTouches[0]),this.dedupSynthMouse(e),this.scrolling||this.processTouches(e,this.overDown)},overDown:function(e){X.set(e.pointerId,{target:e.target,out:e,outTarget:e.target}),y.enterOver(e),y.down(e)},touchforcechange:function(e){this.touchmove(e)},touchmove:function(e){this.scrolling||(this.shouldScroll(e)?(this.scrolling=!0,this.touchcancel(e)):("touchforcechange"!==e.type&&e.preventDefault(),this.processTouches(e,this.moveOverOut)))},moveOverOut:function(e){var t=e,n=X.get(t.pointerId);if(n){var i=n.out,r=n.outTarget;y.move(t),i&&r!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=r,i.target=r,t.target?(y.leaveOut(i),y.enterOver(t)):(t.target=r,t.relatedTarget=null,this.cancelOut(t))),n.out=t,n.outTarget=t.target}},touchend:function(e){this.dedupSynthMouse(e),this.processTouches(e,this.upOut)},upOut:function(e){this.scrolling||(y.up(e),y.leaveOut(e)),this.cleanUpPointer(e)},touchcancel:function(e){this.processTouches(e,this.cancelOut)},cancelOut:function(e){y.cancel(e),y.leaveOut(e),this.cleanUpPointer(e)},cleanUpPointer:function(e){X.delete(e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(e){var t=x.lastTouches,n=e.changedTouches[0];if(this.isPrimaryTouch(n)){var i={x:n.clientX,y:n.clientY};t.push(i);var r=function(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}.bind(null,t,i);setTimeout(r,G)}}};D=new n(V.elementAdded,V.elementRemoved,V.elementChanged,V);var W,$,J,Q=y.pointermap,Z=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,ee={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(e){y.listen(e,this.events)},unregister:function(e){y.unlisten(e,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(e){var t=e;return Z&&((t=y.cloneEvent(e)).pointerType=this.POINTER_TYPES[e.pointerType]),t},cleanup:function(e){Q.delete(e)},MSPointerDown:function(e){Q.set(e.pointerId,e);var t=this.prepareEvent(e);y.down(t)},MSPointerMove:function(e){var t=this.prepareEvent(e);y.move(t)},MSPointerUp:function(e){var t=this.prepareEvent(e);y.up(t),this.cleanup(e.pointerId)},MSPointerOut:function(e){var t=this.prepareEvent(e);y.leaveOut(t)},MSPointerOver:function(e){var t=this.prepareEvent(e);y.enterOver(t)},MSPointerCancel:function(e){var t=this.prepareEvent(e);y.cancel(t),this.cleanup(e.pointerId)},MSLostPointerCapture:function(e){var t=y.makeEvent("lostpointercapture",e);y.dispatchEvent(t)},MSGotPointerCapture:function(e){var t=y.makeEvent("gotpointercapture",e);y.dispatchEvent(t)}};window.navigator.msPointerEnabled?(W=function(e){s(e),u(this),c(e)&&(y.setCapture(e,this,!0),this.msSetPointerCapture(e))},$=function(e){s(e),y.releaseCapture(e,!0),this.msReleasePointerCapture(e)}):(W=function(e){s(e),u(this),c(e)&&y.setCapture(e,this)},$=function(e){s(e),y.releaseCapture(e)}),J=function(e){return!!y.captureInfo[e]},o(),a(),l()})();var d,f,v,m={};function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function y(e){if(Array.isArray(e))return e}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){return y(e)||c(e)||h(e,t)||g()}function T(e,t,n){var i=Math.log(t),r=i+(Math.log(n)-i)*e;return Math.exp(r)}function w(e,t){var n=t.getBoundingClientRect(),i=n.left,r=n.top,o=n.width,a=n.height,s=Math.max(0,Math.min(e.clientX-i,o)),u=Math.max(0,Math.min(e.clientY-r,a));return{x:s,y:u,relX:s/o,relY:u/a,width:o,height:a}}function P(e,t,n){e.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}t(m,"pointer",(function(){return d}),(function(e){return d=e})),t(m,"ring",(function(){return f}),(function(e){return f=e})),t(m,"pane",(function(){return v}),(function(e){return v=e})),d="GmrByW_pointer",f="GmrByW_ring",v="GmrByW_pane";var O=window.AudioContext||window.webkitAudioContext;function S(e,t){var n=t.currentTime,i=e.value;e.cancelScheduledValues(n),e.value=i}var M={waveType:"square",gainMin:.01,gainMax:.3,frequencyMinHz:65,frequencyMaxHz:3e3,attackMs:10,releaseMs:200,updateMs:10,mute:!1},C=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),o(this,"_options",void 0),o(this,"toneObjects",void 0),o(this,"releasingToneObjects",void 0),o(this,"audioContext",void 0),o(this,"globalGain",void 0),this._options=a({},M,t),this.toneObjects=new Map,this.releasingToneObjects=new Set,this.audioContext=new O,this.globalGain=this.audioContext.createGain(),this.globalGain.gain.value=0,this.globalGain.connect(this.audioContext.destination),this.applyMute()}return r(e,[{key:"getOptions",value:function(){return a({},this._options)}},{key:"applyOptions",value:function(e){Object.assign(this._options,e),this.applyMute(),this.refresh()}},{key:"getToneData",value:function(){var e=p(this.toneObjects.entries()).map((function(e){var t,n=E(e,2),i=n[0],r=n[1];return[i,(t=r,{tGain:t.tGain,tFrequency:t.tFrequency})]}));return new Map(e)}},{key:"size",get:function(){return this.toneObjects.size}},{key:"createTone",value:function(){var e=this.audioContext.createGain();e.gain.value=0,e.connect(this.globalGain);var t=this.audioContext.createGain();t.connect(e);var n=this._options.waveType,i=this.audioContext.createOscillator();return i.type=n,i.connect(t),i.start(),{envelopeGainNode:e,gainNode:t,oscillatorNode:i}}},{key:"getToneParams",value:function(e,t){var n,i=this._options,r=i.gainMin,o=i.gainMax,a=(n=r)+(o-n)*e,s=this._options;return{gain:a,frequency:T(t,s.frequencyMinHz,s.frequencyMaxHz)}}},{key:"add",value:function(e,t,n){var i=this.createTone(),r=i.envelopeGainNode,o=i.gainNode,s=i.oscillatorNode,u=this.getToneParams(t,n),c=u.gain,l=u.frequency,h=this._options.attackMs,p=this.audioContext.currentTime+h/1e3;r.gain.linearRampToValueAtTime(1,p),o.gain.value=c,s.frequency.value=l,this.remove(e);var d=b(a({},i),{tGain:t,tFrequency:n});return this.toneObjects.set(e,d),d}},{key:"update",value:function(e,t,n){this.audioContext.resume().catch((function(){}));var i=this.toneObjects.get(e);i&&(i.tGain=t,i.tFrequency=n,this.refreshNodes(i))}},{key:"refreshNodes",value:function(e){var t,n=e.tGain,i=e.tFrequency,r=this.getToneParams(n,i),o=r.gain,a=r.frequency,s=e.gainNode,u=e.oscillatorNode,c=this._options.updateMs,l=this.audioContext.currentTime+c/1e3,h=s.gain,p=u.frequency;S(h,this.audioContext),S(p,this.audioContext),h.linearRampToValueAtTime(o,l),(null!==(t=p.exponentialRampToValueAtTime.bind(p))&&void 0!==t?t:p.linearRampToValueAtTime.bind(p))(a,l)}},{key:"remove",value:function(e){var t=this,n=this.toneObjects.get(e);if(n){var i=n.envelopeGainNode,r=n.gainNode,o=n.oscillatorNode,a=this._options.releaseMs,s=this.audioContext.currentTime+a/1e3;i.gain.linearRampToValueAtTime(0,s),setTimeout((function(){i.disconnect(),r.disconnect(),o.stop(),o.disconnect(),t.releasingToneObjects.delete(n),0===t.toneObjects.size+t.releasingToneObjects.size&&t.audioContext.suspend().catch((function(){}))}),a),this.toneObjects.delete(e),this.releasingToneObjects.add(n)}}},{key:"refresh",value:function(){var e=this;p(this.toneObjects.values()).forEach((function(t){return e.refreshNodes(t)}))}},{key:"applyMute",value:function(){var e=this.audioContext.currentTime,t=this.globalGain.gain,n=e+.02,i=this._options.mute?0:1;S(t,this.audioContext),t.linearRampToValueAtTime(i,n)}}]),e}(),I=C,N={touchElementCssClasses:[e(m).ring],touchElementStyle:""};function _(t,n){return t.querySelectorAll(".".concat(e(m).pointer,'[data-pointer-id="').concat(n,'"]'))}var A=function(){"use strict";function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,t),o(this,"_options",void 0),o(this,"tones",void 0),o(this,"handlers",this.getHandlers()),o(this,"element",void 0),o(this,"pane",void 0),this._options=a({},N,r);var u=document.createElement("div");for(u.setAttribute("touch-action","none"),u.classList.add(e(m).pane),u.addEventListener("pointerdown",this.handlers.addPointer),u.addEventListener("pointerup",this.handlers.removePointer),u.addEventListener("pointercancel",this.handlers.removePointer),u.addEventListener("contextmenu",(function(e){return e.preventDefault()}));i.firstChild;)i.firstChild.remove();i.appendChild(u),this.pane=u,this.element=i,this.tones=new I(s)}return r(t,[{key:"getOptions",value:function(){return a({},this._options)}},{key:"applyOptions",value:function(e){Object.assign(this._options,e),this.refreshPointerElementCssAll()}},{key:"getToneOptions",value:function(){return this.tones.getOptions()}},{key:"applyToneOptions",value:function(e){this.tones.applyOptions(e)}},{key:"getHandlers",value:function(){return{addPointer:this.addPointer.bind(this),updatePointer:this.updatePointer.bind(this),removePointer:this.removePointer.bind(this)}}},{key:"addPointer",value:function(t){this.removePointer(t),this.pane.addEventListener("pointermove",this.handlers.updatePointer),this.pane.setPointerCapture(t.pointerId);var n=w(t,this.pane),i=n.relX,r=n.relY,o=document.createElement("div");o.setAttribute("touch-action","none"),this.refreshPointerElementCss(o);var a=document.createElement("div");a.setAttribute("touch-action","none"),a.classList.add(e(m).pointer),a.dataset.pointerId="".concat(t.pointerId),a.appendChild(o),this.pane.append(a),this.tones.add(t.pointerId,i,r),this.updatePointer(t)}},{key:"updatePointer",value:function(e){if(0!==e.buttons){var t=e.pointerId,n=_(this.pane,t),i=w(e,this.pane),r=i.x,o=i.y,a=i.relX,s=i.relY;n.forEach((function(e){return P(e,r,o)})),this.tones.update(t,a,s)}}},{key:"removePointer",value:function(e){var t=e.pointerId;_(this.pane,t).forEach((function(e){return e.remove()})),this.pane.releasePointerCapture(e.pointerId),this.tones.remove(t),0===this.tones.size&&this.pane.removeEventListener("pointermove",this.handlers.updatePointer)}},{key:"refreshPointerElementCss",value:function(e){var t,n=this._options,i=n.touchElementCssClasses,r=n.touchElementStyle;(t=e.classList).add.apply(t,p(i)),e.setAttribute("style",r)}},{key:"refreshPointerElementCssAll",value:function(){this.pane.querySelectorAll(".".concat(e(m).pointer," > *")).forEach(this.refreshPointerElementCss.bind(this))}}]),t}(),k=A;function R(e,t,n,i){var r=n.dataset[t];void 0!==r&&(e[t]=i(r))}document.querySelectorAll('*[data-component="muski-theremin"]').forEach((function(e){var t=R,n={};t(n,"touchElementCssClasses",e,(function(e){return e.split(" ")})),t(n,"touchElementStyle",e,(function(e){return e}));var i={};t(i,"waveType",e,(function(e){return e})),t(i,"gainMin",e,Number.parseFloat),t(i,"gainMax",e,Number.parseFloat),t(i,"frequencyMinHz",e,Number.parseFloat),t(i,"frequencyMaxHz",e,Number.parseFloat),t(i,"attackMs",e,Number.parseFloat),t(i,"releaseMs",e,Number.parseFloat),t(i,"updateMs",e,Number.parseFloat),t(i,"mute",e,(function(e){return!0})),new k(e,n,i)}))}();
//# sourceMappingURL=muski-theremin.min.js.map
